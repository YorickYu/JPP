# Elasticsearch中的倒排索引

Elasticsearch作为一款搜索引擎，倒排索引是搜索关键字时用的一种数据结构

#### 正排索引与倒排索引

正排索引

| 文档ID | 文档内容                       |
| ------ | ------------------------------ |
| 1      | Mastering Elasticsearch        |
| 2      | Elasticsearch Server           |
| 3      | Senior Development Engineer YY |

文档内容通过文档的ID去查找获取，如果通过文档内容去定位ID则会相当耗时，类似于SQL的like语句



倒排索引

| 搜索关键字    | 关键字出现次数                 | 对应文档出现位置 |
| ------------- | ------------------------------ | ---------------- |
| Elasticsearch | 3                              | 1:1,2:0          |
| Mastering     | 1                              | 1:0              |
| Server        | Senior Development Engineer YY | 2:1              |

通过关键字定位出现在哪个文档中

- 倒排索引包含2个部分

- - 单词词典，记录所有文档的单词，记录单词到排列表的关联关系

  - - 单词词典一般比较大，通过B树或哈希拉链法实现

  - 倒排列表，记录了单词对应的文档结合，由倒排索引项组成

  - - 倒排索引项

    - - 文档ID
      - 词频(TF) 单词在文档中出现的次数
      - 位置(Position) 单词在文档中分词的文职
      - 偏移(Offset)  记录单词的开始结束位置